pipeline {
  agent any

  stages {
   stage('Check') {
      steps {
        script {
          def branchName = env.BRANCH_NAME
def commitHash = sh script: 'git rev-parse HEAD', returnStdout: true
def repoUrl = 'https://github.com/your-organization/your-repo.git'

echo "Branch name: ${branchName}"
echo "Commit hash: ${commitHash}"
echo "Repository URL: ${repoUrl}"
        }
      }
    }
    
    stage('Run E2E tests') {
      steps {
        sh "mvn -D clean test"
      }

      post {
        success {
          publishHTML([
            allowMissing: false,
            alwaysLinkToLastBuild: false,
            keepAll: false,
            reportDir: 'target/surefire-reports/',
            reportFiles: 'index.html', 
            reportName: 'HTML Report',
            reportTitles: '',
            useWrapperFileDirectly: true
          ])
        }
      }
    }
  }
}
